{"version":3,"file":"component---src-pages-sorteio-tsx-ac4afa7d537990431cee.js","mappings":"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","sources":["webpack://faq/./src/assets/iphones.svg","webpack://faq/./src/pages/sorteio.tsx"],"sourcesContent":["export default __webpack_public_path__ + \"static/iphones-c93b6da365fe075a440a0b4491a25729.svg\";","import React, { FC, useState, useEffect, useRef } from \"react\"\nimport { Helmet } from \"react-helmet\"\nimport { analyticsTrack } from \"../utils\"\nimport {\n  Layout,\n  LoadingScreen,\n  Participant,\n  ParticipantForm,\n  Popup,\n} from \"../components\"\nimport Iphones from \"../assets/iphones.svg\"\nimport easterAdvertise from \"../assets/easter-advertise.png\"\nimport { Review } from \"../components/Review\"\n\ninterface State {\n  loading: boolean\n  participants?: any\n  group?: {\n    name: string\n    comments: string\n  }\n}\n\nconst Content = ({ participants, group, showFriendOnClick }) => {\n  const [secretFriend, setSecretFriend] = useState([])\n\n  const [\n    shuffledparticipantsWithoutSecretFriend,\n    setShuffledparticipantsWithoutSecretFriend,\n  ] = useState([])\n\n  useEffect(() => {\n    const shuffleArray = (array: never[]) => {\n      const arrayCopy = [...array]\n      for (let i = arrayCopy.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1))\n        const temp = arrayCopy[i]\n        arrayCopy[i] = arrayCopy[j]\n        arrayCopy[j] = temp\n      }\n      return arrayCopy\n    }\n\n    setShuffledparticipantsWithoutSecretFriend(\n      shuffleArray(\n        participants.others.filter(\n          (participant: { name: any }) =>\n            participant.name.trim() !== participants.current.friend.trim()\n        )\n      )\n    )\n\n    setSecretFriend(\n      participants.others.find(\n        (participant: { name: any }) =>\n          participant.name.trim() === participants.current.friend.trim()\n      )\n    )\n  }, [])\n\n  const goToAdvertisePage = (link, category, action, label) => {\n    analyticsTrack(category, action, label)\n    window.open(link, \"_blank\", 'rel=\"noreferrer\"')\n  }\n\n  const [translateValue, setTranslateValue] = useState(0)\n  const [goRight, setGoRight] = useState(1)\n  const carouselRef = useRef(null)\n  const dragStartRef = useRef(0)\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setTranslateValue(translateValue + 220 * goRight)\n\n      if (translateValue >= 660) {\n        setGoRight(-1)\n      } else if (translateValue <= 0) {\n        setGoRight(1)\n      }\n\n      console.log(goRight)\n      console.log(translateValue)\n    }, 2000)\n\n    return () => clearInterval(interval)\n  }, [translateValue])\n\n  const handleMouseDown = (e) => {\n    dragStartRef.current = e.clientX\n    document.addEventListener(\"mousemove\", handleMouseMove)\n    document.addEventListener(\"mouseup\", handleMouseUp)\n  }\n\n  const handleMouseMove = (e) => {\n    const dragDistance = (e.clientX - dragStartRef.current) * 20\n    setTranslateValue(translateValue + dragDistance)\n    dragStartRef.current = e.clientX\n  }\n\n  const handleMouseUp = () => {\n    document.removeEventListener(\"mousemove\", handleMouseMove)\n    document.removeEventListener(\"mouseup\", handleMouseUp)\n  }\n\n  // User-initiated dragging on touch start\n  const handleTouchStart = (e) => {\n    dragStartRef.current = e.touches[0].clientX\n  }\n\n  const handleTouchMove = (e) => {\n    const dragDistance = e.touches[0].clientX - dragStartRef.current\n    setTranslateValue(translateValue + dragDistance)\n    dragStartRef.current = e.touches[0].clientX\n  }\n\n  return (\n    <>\n      <section className=\"banner\">\n        <div className=\"hero\">\n          <div className=\"valueProposition\">\n            Amigo secreto sem dobrar papelzinho\n          </div>\n          <img src={Iphones} alt=\"Papelzinho logo\" className=\"iphones\" />\n        </div>\n      </section>\n      <div className=\"page-container pt-4\">\n        <div className=\"pageContent\">\n          <section className=\"mb-4\">\n            <div className=\"groupInfoContainer\">\n              <p className=\"welcomeText\">Olá {participants.current.name},</p>\n\n              <div className=\"groupNameAndMembersNumber\">\n                <div className=\"groupTextName\">\n                  Você está no <span className=\"groupName\">{group.name}</span>\n                </div>\n\n                <span className=\"group__participants\">\n                  {participants.others.length + 1} participantes\n                </span>\n              </div>\n\n              <p className=\"group__description\">{group.comments}</p>\n\n              <div className=\"showFriendButtonContainer\">\n                <button className=\"show-friend-btn\" onClick={showFriendOnClick}>\n                  Revelar meu amigo secreto\n                </button>\n              </div>\n            </div>\n          </section>\n\n          <div className=\"groupFriendAndYouRow\">\n            <Participant participant={secretFriend} isSecretFriend={true} />\n            <ParticipantForm participant={participants.current} />\n          </div>\n          <p\n            className=\"font-weight-bolder\"\n            style={{ fontSize: \"1.8rem\", marginBottom: \"32px\" }}\n          >\n            Outros Participantes\n          </p>\n          <div className=\"row\">\n            {shuffledparticipantsWithoutSecretFriend.map(\n              (participant, index) => (\n                <Participant key={index} participant={participant} />\n              )\n            )}\n          </div>\n        </div>\n\n        <div className=\"reviewsContainer\">\n          <div className=\"reviewsTitle\">Veja as avaliações dos usuários</div>\n\n          <div\n            className=\"reviews-carousel-container\"\n            onMouseDown={handleMouseDown}\n            onTouchStart={handleTouchStart}\n            onTouchMove={handleTouchMove}\n          >\n            <div\n              className=\"reviews\"\n              style={{ transform: `translateX(${translateValue}px)` }}\n              ref={carouselRef}\n            >\n              <Review\n                title={\"Maravilha!\"}\n                body={\n                  \"O aplicativo de sorteio mais fácil do mundo. Facilita muito todo o processo de criação de Amigo Secreto.\"\n                }\n              />\n              <Review\n                title={\"Ótimo\"}\n                body={\n                  \"Super prático e fácil, de todos links e apps q procurei esse foi o melhor\"\n                }\n              />\n              <Review\n                title={\"Excelente\"}\n                body={\n                  \"Prático. Fácil de mexer. Já uso há 3 anos pra sortear o amigo oculto do natal aqui de casa👍\"\n                }\n              />\n              <Review\n                title={\"Top App\"}\n                body={\n                  \"I have tried this app last year with our family and I thought it was very practical and usefull even for the eldery people. We are using again this year, for Christmas!! Top!\"\n                }\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst SorteioPage: FC = () => {\n  const initialState: State = {\n    loading: true,\n  }\n  const [state, setState] = useState(initialState)\n\n  const [showPopup, setShowPopup] = useState(false)\n  const [showSecretFriend, setShowSecretFriend] = useState(false)\n\n  const showFriend: () => void = () => {\n    setShowSecretFriend(true)\n    setShowPopup(true)\n  }\n\n  const hideFriend = () => {\n    analyticsTrack(\"cancel-button\", \"clique\", \"Campanha Méliuz\")\n    setShowPopup(false)\n  }\n\n  useEffect(() => {\n    const query = new URLSearchParams(window.location.search)\n    const groupId = query.get(\"g\")\n    const personId = query.get(\"p\")\n\n    fetch(\n      `https://lm4ipcuu6k.execute-api.us-west-2.amazonaws.com/prd/participant/${groupId}/${personId}`\n    )\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.message === \"Group not found\") {\n          alert(\n            \"Aparentemente o seu grupo de amigo secreto foi deletado pelo organizador no app. Caso esta mensagem esteja errada e seu grupo não tenha sido excluído, entre em contato com o suporte através do meajuda@papelzinho.com.br ou pelo chat na nossa página do facebook.\"\n          )\n          return\n        } else if (data.message === \"\") {\n          alert(\n            \"Participante não encontrado. Entre em contato com o suporte através do meajuda@papelzinho.com.br ou pelo chat na nossa página do facebook.\"\n          )\n          return\n        }\n\n        const participants = data.participants.reduce(\n          (acc: any, participant: { current: any }) => {\n            const newMap = acc\n            if (participant.current) {\n              newMap[\"current\"] = {\n                ...participant,\n                groupId,\n              }\n            } else if (newMap[\"others\"]) {\n              newMap[\"others\"].push(participant)\n            } else {\n              newMap[\"others\"] = [participant]\n            }\n            return newMap\n          },\n          {}\n        )\n\n        setState({\n          loading: false,\n          participants,\n          group: { name: data.name, comments: data.comments },\n        })\n        setShowPopup(true)\n      })\n      .catch(() => {\n        alert(\n          \"Sistema fora do ar. Estamos trabalhando para corrigir o problema o mais rápido possível. Tente acessar novamente mais tarde.\"\n        )\n      })\n  }, [false])\n\n  return (\n    <Layout>\n      <Helmet>\n        <title>Sorteio | Papelzinho ™</title>\n      </Helmet>\n\n      {state.loading ? (\n        <LoadingScreen />\n      ) : (\n        <Content\n          showFriendOnClick={showFriend}\n          group={state.group}\n          participants={state.participants}\n        />\n      )}\n\n      {showPopup && (\n        <Popup\n          message={`\"${state.participants.current.friend}\"`}\n          action2={hideFriend}\n          showSecretFriend={showSecretFriend}\n        />\n      )}\n    </Layout>\n  )\n}\n\nexport default SorteioPage\n"],"names":["Content","participants","group","showFriendOnClick","useState","secretFriend","setSecretFriend","shuffledparticipantsWithoutSecretFriend","setShuffledparticipantsWithoutSecretFriend","useEffect","array","arrayCopy","i","length","j","Math","floor","random","temp","shuffleArray","others","filter","participant","name","trim","current","friend","find","translateValue","setTranslateValue","goRight","setGoRight","carouselRef","useRef","dragStartRef","interval","setInterval","console","log","clearInterval","handleMouseMove","e","dragDistance","clientX","handleMouseUp","document","removeEventListener","className","src","Iphones","alt","comments","onClick","isSecretFriend","style","fontSize","marginBottom","map","index","key","onMouseDown","addEventListener","onTouchStart","touches","onTouchMove","transform","ref","Review","title","body","loading","state","setState","showPopup","setShowPopup","showSecretFriend","setShowSecretFriend","query","URLSearchParams","window","location","search","groupId","get","personId","fetch","then","response","json","data","message","reduce","acc","newMap","push","alert","catch","Helmet","action2","analyticsTrack"],"sourceRoot":""}